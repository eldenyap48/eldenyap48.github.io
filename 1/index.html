<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CS 180 Project 1: Prokudin‑Gorskii Colorization</title>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Lato', sans-serif; text-align: center; margin: 0; padding: 0; background: #f9f9f9; color: #333; }
    .back-link { position: absolute; top: 20px; left: 20px; padding: 10px 18px; font-size: 1em; font-weight: 600; background: #eee; border-radius: 6px; text-decoration: none; color: #333; box-shadow: 0 2px 6px rgba(0,0,0,0.15); transition: background .2s ease, color .2s ease; }
    .back-link:hover { background: #ddd; color: #000; }
    h1 { font-size: 2.6em; margin: 80px 0 36px; font-weight: 700; color: #222; padding: 0 16px; }
    .section { margin: 32px auto; padding: 26px 20px; width: 92%; max-width: 900px; background: #fff; border: 1px solid #ddd; border-radius: 12px; }
    .section h2 { margin: 0 0 14px; font-size: 1.6em; font-weight: 700; color: #111; }
    .description { font-size: 1.06em; line-height: 1.75; max-width: 760px; margin: 0 auto; color: #555; text-align: left; }
    .images { display: flex; flex-wrap: wrap; justify-content: center; align-items: flex-start; gap: 24px; margin: 10px auto 0; padding: 0 8px; }
    .images img { width: 100%; height: auto; display: block; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.12); transition: transform .2s ease; }
    .images img:hover { transform: scale(1.03); }
  .img-card { width: min(300px, 100%); background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); overflow: hidden; }
.img-card figcaption { padding: 8px 10px; font-size: 0.95em; color: #555; border-top: 1px solid #eee; text-align: center; }
</style>
</head>
<body>
  <a href="https://eldenyap48.github.io/" class="back-link">← Back</a>

  <h1>CS 180 Project 1: Images of the Russian Empire — Colorizing the Prokudin‑Gorskii Photo Collection</h1>

  <div class="section">
    <h2>Project Overview</h2>
    <div class="description">
      In this project, I reconstruct color photographs from the Prokudin‑Gorskii glass plates by splitting each plate into B, G, and R channels, aligning them, and stacking to produce an RGB image with minimal artifacts.
    </div>
  </div>

  <div class="section">
    <h2>Approach</h2>
    <div class="description">
      For all images, I first split each glass plate into three equal-height channels (top→bottom = B, G, R). For low-resolution images, I treated the blue channel as the fixed reference and aligned the red and green channels to it by exhaustively searching integer displacements (dx, dy) in a [-15, 15] window along both axes. For each shift, I computed a similarity score using the Normalized Cross-Correlation (NCC); L2/SSD is also supported. Because borders tend to be misaligned, I scored only on the central 80% (crop 10% on each side). The best alignment maximizes NCC (or minimizes L2). After choosing the optimal shifts, I rolled the original G and R channels and stacked [R, G, B] to produce the final color image (saved as JPEG).
      <br><br>
      For the full-resolution .tif plates, I used a recursive coarse-to-fine image pyramid (downscale x0.5). The algorithm aligns at the coarsest level, doubles the estimated offsets as it ascends each level, and performs a small local refinement at the current resolution—significantly improving efficiency while preserving accuracy.
      <br><br>
      For challenging cases like the Emir of Bukhara, where cross-channel brightness differs, I aligned on Sobel edge features rather than raw intensities: I computed gradient magnitude for scoring with NCC but applied the resulting shifts to the original channels. Edges are more stable across filters, so NCC is more robust in this scenario.
    </div>
  </div>

  <div class="section">
    <h2>Single-Scale Alignment (Low-Resolution)</h2>
    <div class="images">
      <figure class="img-card">
        <img src="media/out_single_cathedral.jpg" alt="Single-scale: cathedral.jpg" />
        <figcaption>
          <strong>cathedral.jpg</strong><br>
          G offsets: <em>(2, 5)</em><br>
          R offsets: <em>(3, 12)</em>
        </figcaption>
      </figure>
      <figure class="img-card">
        <img src="media/out_single_monastery.jpg" alt="Single-scale: monastery.jpg" />
        <figcaption>
          <strong>monastery.jpg</strong><br>
          G offsets: <em>(2, -3)</em><br>
          R offsets: <em>(2, 3)</em>
        </figcaption>
      </figure>
      <figure class="img-card">
        <img src="media/out_single_tobolsk.jpg" alt="Single-scale: tobolsk.jpg" />
        <figcaption>
          <strong>tobolsk.jpg</strong><br>
          G offsets: <em>(2, 3)</em><br>
          R offsets: <em>(3, 6)</em>
        </figcaption>
      </figure>
    </div>
  </div>

  <div class="section">
    <h2>Multi-Scale Pyramid Alignment (High-Resolution)</h2>
    <div class="images">
      <figure class="img-card">
        <img src="media/out_cathedral.jpg" alt="Multi-scale: cathedral.jpg" />
        <figcaption>
          <strong>cathedral.jpg</strong><br>
          G offsets: <em>(2, 5)</em><br>
          R offsets: <em>(3, 12)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_monastery.jpg" alt="Multi-scale: monastery.jpg" />
        <figcaption>
          <strong>monastery.jpg</strong><br>
          G offsets: <em>(2, -3)</em><br>
          R offsets: <em>(2, 3)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_tobolsk.jpg" alt="Multi-scale: tobolsk.jpg" />
        <figcaption>
          <strong>tobolsk.jpg</strong><br>
          G offsets: <em>(2, 3)</em><br>
          R offsets: <em>(3, 6)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_church.jpg" alt="Multi-scale: church.tif" />
        <figcaption>
          <strong>church.tif</strong><br>
          G offsets: <em>(4, 25)</em><br>
          R offsets: <em>(-4, 58)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_emir.jpg" alt="Multi-scale: emir.tif" />
        <figcaption>
          <strong>emir.tif</strong><br>
          G offsets: <em>(24, 49)</em><br>
          R offsets: <em>(40, 107)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_harvesters.jpg" alt="Multi-scale: harvesters.tif" />
        <figcaption>
          <strong>harvesters.tif</strong><br>
          G offsets: <em>(17, 60)</em><br>
          R offsets: <em>(13, 124)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_icon.jpg" alt="Multi-scale: icon.tif" />
        <figcaption>
          <strong>icon.tif</strong><br>
          G offsets: <em>(17, 41)</em><br>
          R offsets: <em>(23, 89)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_italil.jpg" alt="Multi-scale: italil.tif" />
        <figcaption>
          <strong>italil.tif</strong><br>
          G offsets: <em>(21, 38)</em><br>
          R offsets: <em>(35, 76)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_lastochikino.jpg" alt="Multi-scale: lastochikino.tif" />
        <figcaption>
          <strong>lastochikino.tif</strong><br>
          G offsets: <em>(-2, -3)</em><br>
          R offsets: <em>(-9, 75)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_lugano.jpg" alt="Multi-scale: lugano.tif" />
        <figcaption>
          <strong>lugano.tif</strong><br>
          G offsets: <em>(-16, 41)</em><br>
          R offsets: <em>(-29, 93)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_melons.jpg" alt="Multi-scale: melons.tif" />
        <figcaption>
          <strong>melons.tif</strong><br>
          G offsets: <em>(11, 82)</em><br>
          R offsets: <em>(13, 178)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_self_portrait.jpg" alt="Multi-scale: self_portrait.tif" />
        <figcaption>
          <strong>self_portrait.tif</strong><br>
          G offsets: <em>(29, 79)</em><br>
          R offsets: <em>(37, 176)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_siren.jpg" alt="Multi-scale: siren.tif" />
        <figcaption>
          <strong>siren.tif</strong><br>
          G offsets: <em>(-6, 49)</em><br>
          R offsets: <em>(-25, 96)</em>
        </figcaption>
      </figure>

      <figure class="img-card">
        <img src="media/out_three_generations.jpg" alt="Multi-scale: three_generations.tif" />
        <figcaption>
          <strong>three_generations.tif</strong><br>
          G offsets: <em>(14, 53)</em><br>
          R offsets: <em>(11, 112)</em>
        </figcaption>
      </figure>

    </div>
  </div>
</body>
</html>
